# 13강. Read 조회하기  

## 1. 예시(게시글 리스트 조회하기)  
1. posts 앱(폴더) > views.py에 아래와 같이 코드 추가  
<pre><code>
from django.shortcuts import render, redirect  
from .models import Post  
from .forms import PostForm  
import pdb  
  
// 추가 및 수정 부분 작성  
def main(request):  
    context = {  
        'posts': Post.objects.all()  
    }  
    return render(request, 'posts/main.html', context)  
  
  
def new(request):  
    context = {  
        'form': PostForm()  
    }  
    return render(request, 'posts/new.html', context)  
  
  
def create(request):  
    if request.method == "POST":  
        form = PostForm(request.POST)  
        if form.is_valid():  
            form.save()  
        return redirect('main')
</code></pre>  
  
2. posts 앱(폴더) > templates 폴더 > posts 폴더 > main.html에서 다음과 같이 코드 수정  
bootstrap에서 'card'를 검색하여 'Example' 코드를 복사하여 붙여넣기 함  
(이미지 부분은 지워줌)  
![card](https://user-images.githubusercontent.com/31130917/106768615-6c5f5980-667f-11eb-8c64-5386f3d5bfc1.PNG)  
실행하면 아래와 같은 결과를 확인 할 수 있음  
![card결과](https://user-images.githubusercontent.com/31130917/106768619-6d908680-667f-11eb-8c16-5dbc8aafd42c.PNG)  
  
3. 반복문을 통해서 게시글(Post) 객체마다 하나의 카드가 나오게 함  
반복문을 통해서 객체리스트를 뿌려줌  
아래와 같이 코드 추가 작성  
![반복문](https://user-images.githubusercontent.com/31130917/106769835-bf85dc00-6680-11eb-92c3-392cb2403e07.PNG)  
=> posts를 post(각각의 객체)로 쪼개서 반복문  
#### template 언어에서는 for, if를 반드시 닫아줘야함  
실행하면 아래와 같은 결과를 확인 할 수 있음  
![반복문결과](https://user-images.githubusercontent.com/31130917/106769840-c01e7280-6680-11eb-8960-58ade214db37.PNG)  
  
아래와 같이 코드 추가 작성  
![card수정](https://user-images.githubusercontent.com/31130917/106770751-9a459d80-6681-11eb-9423-a29670144df3.PNG)  
실행하면 아래와 같은 결과를 확인 할 수 있음  
![card수정결과](https://user-images.githubusercontent.com/31130917/106770756-9ade3400-6681-11eb-8a84-603db601fe4a.PNG)  
  
'card-title'과 'card-text'부분을 아래와 같이 수정하여 실행하면 다음과 같은 결과를 확인 할 수 있음  
<pre><code>
'card-title'에는 {{ post.title }},  
'card-text'에는 {{ post.content }} 로 수정
</code></pre>  
![card수정결과2](https://user-images.githubusercontent.com/31130917/106771480-556e3680-6682-11eb-80a1-918e56ae4517.PNG)  
  
수정한 바로 아랫줄에 다음과 같이 코드를 추가 작성하면 다음과 같은 결과를 확인 할 수 있음  
![card수정3](https://user-images.githubusercontent.com/31130917/106771816-bc8beb00-6682-11eb-892a-f1a3e2e596d1.PNG)  
![card수정결과3](https://user-images.githubusercontent.com/31130917/106771821-bdbd1800-6682-11eb-87ba-e5e9a7f02bab.PNG)  
위의 결과는 가장 최근에 생성된 것이 뒤에 나와있음  
  
3. 생성 시간 순서대로 card 배치  
1) 뿌려줄 객체덩어리(QuerySet)을 정렬 해주는 방법  
post 앱(폴더) > views.py에서 아래와 같이 코드를 수정  
<pre><code>
...  
'posts': Post.objects.all().order_by('-created_at') // created_at에 '-'를 붙여줌으로써 역순으로 출력  
...
</code></pre>  
실행하면 최근 생성 시간 부터 배치된 것을 확인 할 수 있음(생략)  
#### order_by를 사용할 때는 .all()을 생략해도 됨  
  
2) 모델에 자체 기본 순서를 설정해주는 방법  
위와 같이 수정하지 않고 models.py에 들어가서 직접 순서를 정함  
아래와 같이 코드 추가  
<pre><code>
from django.db import models  
  
  
class Post(models.Model):  
    class Meta:  
        ordering = ['-created_at']  
  
    title = models.CharField(max_length=300)  
    content = models.TextField()  
    view_count = models.IntegerField(default=0)  
    created_at = models.DateTimeField(auto_now_add=True)  
    updated_at = models.DateTimeField(auto_now=True)
</code></pre>  
#### class에 속성을 부여하려면 class Meta 사용(위는 Meta를 사용하여 정렬 속성을 부여)  
실행하면 첫번째 방법처럼 최근 생성 시간 부터 배치된 것을 확인 할 수 있음(생략)  
